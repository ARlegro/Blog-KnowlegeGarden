---
{"dg-publish":true,"permalink":"/Computer_Science/Cμ–Έμ–΄, μλ£κµ¬μ΅°, μ•κ³ λ¦¬μ¦/ν‚¤μ›λ“κ³µλ¶€/λ™μ  λ©”λ¨λ¦¬/","noteIcon":"","created":"2025-08-07T17:48:39.259+09:00","updated":"2025-08-18T01:06:58.988+09:00"}
---




### λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήμ΄λ€β“
> ν”„λ΅κ·Έλ¨ **μ‹¤ν–‰ λ„μ¤‘μ— λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ή λ°›λ”** κ²ƒ 
- **ν”„λ΅κ·Έλ¨μ λ©”λ¨λ¦¬ ν• λ‹Ήκ³Ό λ°ν™**
	- ν”„λ΅κ·Έλ¨μ€ ν•„μ”ν• λ§νΌμ λ©”λ¨λ¦¬λ¥Ό OSλ΅λ¶€ν„° ν• λ‹Ήλ°›μ•„μ„ μ‚¬μ©
	- μ‚¬μ©μ΄ λλ‚λ©΄ OSμ— λ©”λ¨λ¦¬λ¥Ό λ°λ‚© 
	  
- **λ™μ  λ©”λ¨λ¦¬ ν• λ‹ΉκΈ°λ²•** 
	- ν•„μ”ν• λ§νΌλ§ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•κ³  λ°ν™ν•μ—¬ **λ©”λ¨λ¦¬λ¥Ό ν¨μ¨μ μΌλ΅ μ‚¬μ©**ν•κ² ν•λ” κ²ƒ  
	- Cμ—μ„λ” `malloc()` κ³„μ—΄μ λΌμ΄λΈλ¬λ¦¬ ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ ν• λ‹Ή λ°›μ•„ μ‚¬μ© κ°€λ¥ 


### Cμ–Έμ–΄μ λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ήκ³Ό ν•΄μ  
> ν•„μ”ν• λ§νΌ λ©”λ¨λ¦¬ κ³µκ°„μ„ ν™(Heap) μμ—­μ— μ§μ ‘ ν• λ‹Ή λ°›λ” κΈ°μ  

>[!tip] ν•„μ” λΌμ΄λΈλ¬λ¦¬ 
>`<stdib.h>` ν—¤λ” νμΌμ— μ •μλ `malloc()`ν•¨μλ¥Ό μ‚¬μ©ν•μ—¬ μν–‰ 
```c
#include <stdlib.h> // malloc(), free() μ‚¬μ©μ„ μ„ν• 
```

#### ν• λ‹Ή(Allocation) - malloc 
#malloc 

β”`malloc(size)`ν•¨μ 
- μ—­ν•  : μΈμλ΅ μ „λ‹¬λ size byteλ§νΌμ **λ©”λ¨λ¦¬λ¥Ό ν™ μμ—­μ— ν• λ‹Ή** 
- **κΈ°λ³Έ λ°ν™ κ°’** : `void *`νƒ€μ… β¬… μ–΄λ–¤ νƒ€μ…μ λ°μ΄ν„°λΌλ„ λ‹΄μ„ μ μλ” μ£Όμ†
- **π¥λ©”λ¨λ¦¬ ν• λ‹Ή μ‹¤ν¨ μ‹** : `Null` λ°ν™ (So null μ²΄ν¬ μμ£Ό γ„±)


**β…μμ‹** 
```c
int main(){
	int *pi = (int *) malloc(sizeof(int)); // int ν•λ‚λ§νΌ λ©”λ¨λ¦¬ ν• λ‹Ή
Β  if (pi == NULL){ // Null μ²΄ν¬ 
Β  Β  printf("λ©”λ¨λ¦¬ ν• λ‹Ή λ»ν•κ±°\n");
Β  Β  return 1;
Β  }

Β  *pi = 14; // ν• λ‹Ήλ λ©”λ¨λ¦¬μ— κ°’ μ €μ¥
	Β  return 0;
}
```
`(int *)malloc(sizeof(int));`
- **μ „μ²΄ μλ―Έ**
	- intλ¥Ό ν•λ‚ μ €μ¥ν•  μ μλ” ν™ λ©”λ¨λ¦¬λ¥Ό λ§λ“¤κ³  κ·Έ μ£Όμ†λ¥Ό int ν¬μΈν„°λ΅ λ°ν™ν•λΌλ” λ»
- `malloc(x)`
	- memory allocation 
	- **x ν¬κΈ°λ§νΌμ λ©”λ¨λ¦¬λ¥Ό ν™ μμ—­μ— ν• λ‹Ή**ν•λ” κ²ƒ 
	- `sizeof(int)` = `int`νƒ€μ… ν•λ‚κ°€ μ°¨μ§€ν•λ” λ°”μ΄νΈ μ(4byte)
- `(int *)` : void ν¬μΈν„°λ¥Ό int ν¬μΈν„°λ΅¤ ν• λ³€ν™ 

>[!tip] void* μ μλ™ ν• λ³€ν™
>- Cμ—μ„ `void *`λ¥Ό λ‹¤λ¥Έ ν¬μΈν„° νƒ€μ…μΌλ΅ λ€μ… μ‹ λ…μ‹μ  ν•λ³€ν™μ΄ μ—†μ–΄λ„ **μλ™ λ³€ν™μ΄ λλ‹¤.** by μ»΄νμΌλ¬ (π¥C++μ€ μ•λ¨)


>[!tip] sizeof()λ¥Ό μ‚¬μ©ν•μ—¬ μΈμμ— ν¬κΈ°λ¥Ό μ „λ‹¬ν•λ” μ΄μ  
>- **μ΄μ‹μ„± ν™•λ³΄**κ°€ κ°€μ¥ ν¬λ‹¤
>- OSλ§λ‹¤ CPU μ•„ν‚¤ν…μ³λ§λ‹¤ μλ£ν•μ ν¬κΈ°κ°€ λ‹¤λ¥Ό μ μλ‹¤.
>- `sizeof()`λ” μλ™μΌλ΅ ν¬κΈ°λ¥Ό κ³„μ‚°ν•΄μ£Όλ―€λ΅ λ¬Έμ λ¥Ό μ‚¬μ „μ— λ°©μ§€ κ°€λ¥ 


#### ν•΄μ (Deallocation)
#free
> λ™μ μΌλ΅ ν• λ‹Ήλ λ©”λ¨λ¦¬λ” **μ‚¬μ© ν›„ λ°λ“μ‹ λ…μ‹μ  ν•΄μ  ν•„μ”** 

>[!QUESTION] ν•΄μ  μ•ν•λ©΄β“
λ©”λ¨λ¦¬κ°€ ν”„λ΅κ·Έλ¨ μΆ…λ£ν•  λ•κΉμ§€ λ°ν™λμ§€ μ•λ” **"λ©”λ¨λ¦¬ λ„μ"** λ°μƒ 

β”`free(ν¬μΈν„°)` ν•¨μ 
- `malloc`, `calloc`, `realloc`μΌλ΅ **ν• λ‹Ήλ°›μ€ λ©”λ¨λ¦¬λ¥Ό OSμ— λ°ν™**ν•λ‹¤
- param : **λ©”λ¨λ¦¬ ν• λ‹Ή ν•¨μκ°€ λ°ν™ν–λ ν¬μΈν„°**λ¥Ό μΈμλ΅ λ°›λ”λ‹¤ 

>[!tip] λ©”λ¨λ¦¬ ν•΄μ  ν›„ - Nullλ΅ μ΄κΈ°ν™” εΏ…
>- pλΌλ” ν¬μΈν„°μ λ©”λ¨λ¦¬ ν• λ‹Ήμ„ ν•΄μ ν•λ‹¤ν•΄λ„ **pλ” μ—¬μ „ν κ·Έ λ©”λ¨λ¦¬λ¥Ό κ°€λ¦¬ν‚¤κ³ ** μλ‹¤ β΅ μ¶”ν›„ μ ‘κ·Ό μ‹ **μ¤λ¥ λ°μƒ π’Ά**
>- λ§μ•½, 


```c
int main(void){
Β  int *pi = (int *)malloc(sizeof(int));
Β  if (pi == NULL){
Β  Β  printf("λ©”λ¨λ¦¬ ν• λ‹Ή λ»ν•κ±°\n");
Β  Β  return 1;
Β  }

Β  *pi = 14; // ν• λ‹Ήλ λ©”λ¨λ¦¬μ— κ°’ μ €μ¥
Β  printf("ν• λ‹Ήλ λ©”λ¨λ¦¬ μ£Όμ†: %p, κ°’: %d\n", pi, *pi);


	// λ©”λ¨λ¦¬ ν•΄μ  - ν™ λ©”λ¨λ¦¬ ν•΄μ 
Β  free(pi);
Β  printf("λ©”λ¨λ¦¬ ν•΄μ  μ™„\n");

	// μ¤λ¥ λ°©μ§€
Β  pi = NULL; 
Β  return 0;
}
// μ¶λ ¥ κ°’ 
//ν• λ‹Ήλ λ©”λ¨λ¦¬ μ£Όμ†: 0x560cbacff2a0, κ°’: 14
//λ©”λ¨λ¦¬ ν•΄μ  μ™„
```



### μ‹¬ν™” : ν¬μΈν„°λ¥Ό λ°°μ—΄μ²λΌ 

> ν¬μΈν„°λ¥Ό λ°°μ—΄μ²λΌ ν™μ©ν•  μλ„ μλ‹¤.

```c
#include<stdio.h>
#include<stdlib.h>

int main(void) {
Β  // λ™μ  λ©”λ¨λ¦¬λ¥Ό λ°°μ—΄μ²λΌ μ‚¬μ©ν•λ” κ²½μ°
Β  char *p_name = malloc(3);

Β  p_name[0] = 'a';
Β  p_name[1] = 'b';
Β  p_name[2] = 'c';
Β  printf("%s\n", p_name); // abc
Β  
Β  free(p_name);

Β  // μΌλ°μ  λ°°μ—΄ μ‚¬μ©
Β  char name[3];
Β  name[0] = 'a';
Β  name[1] = 'b';
Β  name[2] = 'c';
Β  printf("%s\n", name); // abc
Β  return 0;
}
```
![Pasted image 20250807215517.png](/img/user/supporter/image/Pasted%20image%2020250807215517.png)

>[!QUESTION] κ·Έλ ‡λ‹¤λ©΄ λ°°μ—΄ λ°©λ²•κ³Ό λ¬΄μ¨ μ°¨μ΄μΌκΉ?
> - μ‚¬μ‹¤, λ°°μ—΄μ€ ν¬μΈν„° μƒμμ΄λ‹¤(μ¦‰, λ°°μ—΄μ€ ν¬μΈν„°μ€λ κ²ƒ...)
> - μ°λ¦¬κ°€ μ“°λ” ν¬μΈν„°λ” λ³€μ   
> - **β­ν¬μΈν„° λ³€μ(`*`)λ” μ£Όμ†κ°’μ„ λ°”κΏ€ μ μλ‹¤!!!**



### λ‹¤λ¥Έ λ™μ  λ©”λ¨λ¦¬ ν• λ‹Ή ν•¨μ 

> `malloc()`μ™Έμ—λ„ `calloc()`, `realloc()`λΌλ” ν•¨μλ„ λ¨λ‘ Heap μμ—­μ— λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ήν•λ” ν•¨μλ“¤μ΄λ‹¤.

#### 1. calloc() - Contiguous Allocation 
> μλ£ν•μ κ°μλ§νΌ λ©”λ¨λ¦¬λ¥Ό ν• λ‹Ή 
> - `calloc(μ”μ†μ κ°μ, μ”μ†μν¬κΈ°);`

**μμ‹ - `calloc(3, sizeof(int));`**
- intν• 3κ°λ¥Ό λ‹΄μ„ μ μλ” **λ©”λ¨λ¦¬ κ³µκ°„μ„ ν• λ‹Ή**ν•κ³ , **λ¨λ“  κ°’μ„ 0μΌλ΅ μ΄κΈ°ν™”**

`malloc()`μ€ ν• λ‹Ήλ λ©”λ¨λ¦¬ κ³µκ°„μ„ μ΄κΈ°ν™”ν•μ§€ μ•λ”λ‹¤. λ”°λΌμ„, ν• λ‹Ή λ°›μ€ λ©”λ¨λ¦¬μ— μ΄μ „μ— μ“°λ μ”μ¬κ°€ μμΌλ©΄ κ·Έκ±°λ¥Ό μ¬μ‚¬μ© ν•  μλ„ μμ 




#### 2. realloc() - Re-Allocation 
> μ΄λ―Έ ν• λ‹Ήλ **λ©”λ¨λ¦¬ ν¬κΈ°λ¥Ό λ³€κ²½** 
- κΈ°μ΅΄ λ°μ΄ν„°λ” μ μ§€ν•λ©΄μ„ λ©”λ¨λ¦¬ ν¬κΈ° μ΅°μ •ν•κ³  μ‹¶μ„ λ• μ‚¬μ© 
- λ¬Έλ²• : `realloc(κΈ°μ΅΄ν¬μΈν„°, μƒλ΅μ΄λ©”λ¨λ¦¬ν¬κΈ°)`
