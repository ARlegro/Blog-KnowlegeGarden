---
{"dg-publish":true,"permalink":"/Computer_Science/Network/개념/Proxy 서버 개념/","noteIcon":"","created":"2025-08-31T12:30:54.745+09:00","updated":"2025-09-05T02:25:57.081+09:00"}
---



### 들어가기전 : inline과 Out of Path

> inline과 Out of Path는 네트워크 통신에서 *트래픽을 처리하는 두 가지 기본적인 배치 방식* 
> - 이 개념을 알아야 Proxy 서버, 보안장비(방화벽 등)가 네트워크에서 **어떻게 연결되어 동작하는지 이해 가능**
> - 특히, 기본적으로 Proxy는 클라-서버 사이에 위치하여 inline 방식으로 트래픽 중계(물론 Out of Path 방식으로도 구성할 수 있음)

---
#### 1. inline
> 네트워크 트래픽 흐름 **중간에 직접 삽입되어 모든 트래픽을 처리**하는 방식

*동작 방식 예시*
- `A(출발지)` -> `B(인라인 장비)` -> `C(목적지)` 순서로 흐르며, 
- inline 장비가 **모든 패킷을 검사하고 제어**

*💚장점* - 보안 정책 강력
- 모든 트래픽 **감시 가능** 
- 패킷 차단 수정 등의 **강한 제어 가능** 


*🛑단점*
- **장비 장애 발생 시** 모든 네트워크 통신 자체가 **중단**될 수 있다.
- 그니까 장비에 너무 결합도가 높다 

---
#### 2. Out of Path
> 네트워크 트래픽의 흐름에 **직접적으로 개입하지 않고, 트래픽을 복사해서 분석하는 방식**

*목적*
- 실시간 제어 ❌
- **트래픽 감시 및 분석**이 주 목적 💚

*💚장점*
- **장비에 문제가 생겨도 네트워크에 지장 없다**

*🛑단점*
- 트래픽을 **직접 제어 및 차단 불가능** 
- **수동**으로 감시해야 함 

---
# Proxy 시작 

**프록시 서버**는 클라이언트와 목적지 서버 사이에 위치하여 **요청을 대신 처리하는 중개자** 역할

---
## 개념 
프록시는 **사용자 모드 애플리케이션 프록시**로 작동한다. 이는 OSI 7계층 중 **애플리케이션 계층(L7)** 에서 작동한다는 의미. 덕분에 개별 패킷 단위가 아니라, **소켓 스트림**과 같은 **데이터 흐름**을 직접 다룰 수 있다. 패킷을 재조립하는 복잡한 과정 없이, 애플리케이션이 주고받는 데이터(ex. HTTP 요청)를 직접 처리하는 것.

---
## 왜 쓰는가?

---
### 이유 1. 우회 
> 프록시 서버는 네트워크 제한을 **우회하는 게이트웨이** 역할을 할 수 있다.

접속하고자 하는 사이트의 회사 방화벽이 특정 웹사이트를 차단할 때, 사용자는 프록시 서버를 통해 접속할 수 있다. (클라 -> Proxy 서버 -> 접속하려는 서버)

우회는 가능한데 그 우회하는 Proxy가 모든 통신을 감시 가능해진다

---
### 이유 2. 분석 
> 애플리케이션 계층에서 작동하기 때문에, 데이터가 암호화되기 전에 트래픽을 **검사**할 수 있다 

- 예를 들어, 웹 서버로 전송되는 HTTP 요청이 TLS/SSL로 암호화되기 전에 그 내용을 분석할 수 있다. (Packet 재조립 전에 socket 통신으로 Proxy와 통신해서 거기서 분석 가능)

- 이를 통해 자세한 트래픽 분석, 콘텐츠 필터링, 그리고 **악성 코드 감지**를 수행할 수 있음
- 원래는 Proxy써도 Packet 재조립 과정하면서 했는데 이런 방법도 가능하다는 것

---
### 이유 3. 감시와 보호 
> 프록시는 네트워크를 **감시하고 보호하는 강력한 도구**

모든 웹 트래픽의 중심 역할을 하며 보안 정책을 강제할 수 있다.
- 알려진 악성 웹사이트로의 접근을 **차단** 가능
- 특정 파일 유형(예: .exe 다운로드)이나 콘텐츠를 **필터링** 가능
- **웹 애플리케이션 방화벽** 역할 가능

---
### 이유 4. Reverse Proxy
#보안 #감시 #로드벨런싱  #Reverse_Proxy

> 하나 이상의 웹 서버 앞에 위치하여 클라이언트의 요청을 적절한 백엔드 서버로 분산시키는 역할

- 외부에서 내부 Server가 제공하는 서비스 접근 시 Proxy 서버를 먼저 거쳐서 내부 Server로 들어오는 방식
- 클라이언트는 실제 내부 네트워크 구조를 알 수 없다.

![Pasted image 20250831144557.png](/img/user/supporter/image/Pasted%20image%2020250831144557.png)
위 사진처럼 서버 앞에 Proxy 서버를 배치할 수 있다.

---
#### R.P 장점 1.  보안
- *내부 서버의 정보를 외부로부터 숨길 수 있다*
	- 외부 사용자는 실제 내부 서버의 존재를 모른다 Cuz **내부 웹서버는 Private**, Reverse Proxy 서버는 Public
	- 클라이언트는 웹서버인 줄 알고 접속했던 ip가 사실은 Proxy ip였던 것 
	  
- Reverse Proxy도 Proxy이므로 *감시 및 보호(웹 application 방화벽 등) 가능* 
	- 감시 단위 = socket stream (❌패킷) Cuz HTTP 는 L7)
	- **감시 단위가 stream이라 감시가 편함** : 재조립 필요 없고, 대용량 데이터 다루기 쉬움 
	- 이렇게 함으로써 Web 서버가 할 일을 줄여줄 수 있다.

---
#### R.P 장점 2. 로드벨런싱 유리 
> 가장 일반적인 Reverse Proxy의 용도이다.

여러 개의 백엔드 서버에 들어오는 **트래픽을 분산**시켜 특정 서버에 과부하가 걸리는 것을 막고 성능과 가용성을 높여준다.


---
### 이유 5. 캐싱 

>자주 접근하는 콘텐츠(이미지, 파일, 웹페이지 등)의 사본을 저장해 둘 수 있다.

- 클라이언트가 캐시에 이미 저장된 콘텐츠를 요청하면, 프록시는 end-server에 접속하지 않고 데이터를 바로 제공 가능
- 덕분에 클라이언트의 **응답 속도가 빨라지고**, end-server의 **부하가 줄어들며**, **네트워크 대역폭을 절약**할 수 있다.

