---
{"dg-publish":true,"permalink":"/DevStudy/Argorithm/python/DFS, ì •ë ¬, ë°°ì—´/ë°±ì¤€ 2468 - ì•ˆì „ì˜ì—­/","noteIcon":"","created":"2025-12-03T14:52:52.503+09:00","updated":"2025-12-13T18:25:27.546+09:00"}
---



5ì‹œê°„ ë™ì•ˆ í’€ì–´ì„œ ì •ë‹µì€ ë§ì·„ëŠ”ë° ì‹œê°„ì´ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ í’€ì´ë³´ë‹¤ ë„ˆë¬´ ì˜¤ë°”ë˜ì–´ìˆì–´ì„œ ë¦¬ë·°ê°€ ì ˆì‹¤í•˜ë‹¤ê³  ëŠê¼ˆë‹¤.
![Pasted image 20250716225423.png](/img/user/supporter/image/Pasted%20image%2020250716225423.png)
ê·¸ë¦¬ê³ , ë‚´ê°€ ìƒê°í•˜ëŠ” ë…¼ë¦¬ê°€ ë§ì„í…ë° RecursionErrorë°œìƒí•´ì„œ DFSë¡œëŠ” í’€ ìˆ˜ ì—†ë‚˜??? í–ˆë‹¤.
ê·¸ëŸ°ë°, ë°±ì¤€ ì œì¶œ í›„ Error ê°€ì´ë“œë¥¼ ë³´ë‹ˆ `sys.setrecursionlimit(10**6)`ì´ê±°ë¥¼ ë„£ìœ¼ë©´ í•´ê²°ëœë‹¤ê³  í•´ì„œ ë„£ì—ˆë”ë‹ˆ í•´ê²°ëë‹¤.
ì•„ë¬´íŠ¼... ë§ì¶”ê¸´ í–ˆìœ¼ë‚˜ ì¢€ ë” ì„±ëŠ¥ ì¢‹ì€ ì½”ë“œë¥¼ ìœ„í•´ ë¦¬ë·°í•´ë³´ë„ë¡ 

>[!EXAMPLE] `sys.setrecursionlimit(10** 6)` â“
>- íŒŒì´ì¬ì—ì„œ ì¬ê·€ í•¨ìˆ˜ê°€ í˜¸ì¶œë  ìˆ˜ ìˆëŠ” **ìµœëŒ€ ê¹Šì´(Recursion Depth)ë¥¼ ì„¤ì •**í•˜ëŠ” **ëª…ë ¹ì–´**
>- ì´ë¥¼ í†µí•´, `RecursionError`ë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.
>- íŒŒì´ì¬ì˜ default ìµœëŒ€ ê¹Šì´ : 1000
>- ë°±íŠ¸ë˜í‚¹ ê°™ì€ ë¬¸ì œëŠ” ì´ëŸ° ì„¤ì •ì„ í†µí•´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.

### ë¬¸ì œ 

> ë„ˆë¬´ ê¸¸ì–´ì„œ ë§í¬ ì°¸ê³  

[ì•ˆì „ì˜ì—­](https://www.acmicpc.net/problem/2468)

### ë‚´ê°€ í‘¼ ë‹µ 
```python
import sys, copy
sys.setrecursionlimit(10**6) Â 
input = sys.stdin.readline

n = int(input())  
areas = [[0]*n for _ in range(n)]

for row in range(n):
Â  cols = list(map(int, input().split()))
Â  for col in range(n):
Â  Â  areas[row][col] = cols[col]

def get_max_height(two_dimenstion_arr):
Â  # 2ì°¨ì› ë°°ì—´ ì–»ì–´ì„œ max ì°¾ê¸°
Â  flat_list = []
Â  for row in two_dimenstion_arr:
Â  Â  for col in row:
Â  Â  Â  flat_list.append(col)

Â  return max(flat_list)

def move(x, y):
Â  x = x + 1
Â  if x >= n:
Â  Â  x = 0
Â  Â  y += 1
Â  if y >= n:
Â  Â  return None
Â  Â  
Â  return (x,y)  

def fill_zone(areas, limit, current_x, current_y): Â 
Â  # x,yê°€ ì„ ì„ ë„˜ì€ ê³³ or safeí•˜ì§€ ì•Šì€ ê³³ Â 
Â  if current_x < 0 or current_x >= n or current_y < 0 or current_y >= n or areas[current_x][current_y] <= limit:
Â  Â  return

Â  if areas[current_x][current_y] > limit:
Â  Â  areas[current_x][current_y] = - 100 Â # ë„ˆë„ ìƒ‰ì¹ 

Â  # ìœ„
Â  fill_zone(areas, limit, current_x - 1, current_y)
Â  
Â  # ìš°
Â  fill_zone(areas, limit, current_x, current_y + 1)

Â  # ì•„ë˜
Â  fill_zone(areas, limit, current_x + 1, current_y)

Â  # ì¢Œ
Â  fill_zone(areas, limit, current_x, current_y - 1)

def count_safe_zone(areas, limit, x, y):
Â  count = 0
Â  while True:
Â  Â  if areas[x][y] > limit:
Â  Â  Â  # ìœ„ -> ìš° -> ì•„ë˜ -> ì¢Œ : ì´ê±¸ ê³„ì† ë°˜ë³µ
Â  Â  Â  fill_zone(areas, limit, x, y)
Â  Â  Â  count += 1

Â  Â  move_result = move(x,y)
Â  Â  if not move_result:
Â  Â  Â  break

Â  Â  x, y = move_result
Â  Â  
Â  return count
Â  
def main(original_areas):
Â  max = 0
Â  # get_max_value : ê³ ì¸µ ë†’ì´
Â  for limit in range(get_max_height(original_areas), -1, -1):
Â  Â  copied_areas = copy.deepcopy(original_areas) 
Â  Â  # ì•ˆì „ì˜ì—­ êµ¬í•˜ê¸° of copied_areas
Â  Â  count: int = count_safe_zone(copied_areas, limit, 0,0)

Â  Â  if max < count:
Â  Â  Â  max = count
Â  Â  Â  
Â  print(max)

main(areas)
```
#### ì½”ë“œ ì„¤ëª… 
`get_max_height()`
- ì¼ë‹¨ **ë†’ì´ë¥¼ ë¬´ì œí•œìœ¼ë¡œ í•˜ê¸° ì‹«ì–´ì„œ** ì´ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì—ˆë‹¤.
- ë¬¼ë¡ , ì´ê±° ì—†ì´ë„ count_safe_zoneí˜¸ì¶œ ì‹œ Whileë¬¸ì„ ëŒì•„ì„œ count = 0 ì„ ë°˜í™˜í•˜ë©´ ì¢…ë£Œí•˜ëŠ” ì‹ìœ¼ë¡œ í•´ë„ ëì§€ë§Œ, ì´ê²Œ ì¢€ ë” íš¨ìœ¨ì ì¸ ë°©ë²•ì´ë¼ ìƒê°í•´ì„œ ë¯¸ë¦¬ ìµœëŒ€ limitì„ êµ¬í•¨

`copied_areas` 
- ì²˜ìŒ êµ¬ìƒì—ì„œëŠ” `visited()`ë¥¼ ì¨ì„œ ë°©ë¬¸í–ˆëŠ”ì§€ ì•ˆí–ˆëŠ”ì§€ í™•ì¸í•˜ë ¤ê³  ë¡œì§ì„ ìƒê° í–ˆì–´ì„œ ì´ê²Œ ì‚¬ìš©ë˜ê³  ìˆì—ˆë‹¤.
- ê·¼ë° ë‚˜ì¤‘ì— ë¦¬íŒ©í† ë§ë˜ë©´ì„œ -100 ìœ¼ë¡œ ë¬´ë„ˆëœ¨ë¦¬ëŠ” ë¡œì§ì´ ìƒê¸°ë‹ˆ í•„ìš”í•´ì„œ ë„£ì—ˆë‹¤ 
	```python
	import copy
	
	copied_areas = copy.deepcopy(areas)
	```


`count_safe_zone`
- **íŒŒë¼ë¯¸í„° ì¢…ë¥˜** - ë°°ì—´, ì œí•œ ë†’ì´, í˜„ì¬ ìœ„ì¹˜ x, í˜„ì¬ ìœ„ì¹˜ y
- move(x,y) ë¡œ í˜„ì¬ ìœ„ì¹˜ë¶€í„° ëê¹Œì§€ ã„± (ëì´ë©´ Break)
- `if areas[x][y] > limit:` 
	- ì•ˆì „í•œ ê³³ ì°¾ìœ¼ë©´ ê±°ê¸°ì„œë¶€í„° ê¹Šì´íƒìƒ‰í•˜ë©´ì„œ ì¹´ìš´íŠ¸
	- safe-zoneì„ í™•ì¸í•  ë•Œ, ì´ë¯¸ ì§€ë‚˜ì˜¨ ê³³ì€ ë¬´ë„ˆëœ¨ë¦¬ê¸°( - 100) Cuz ë” ì´ìƒ íƒìƒ‰í•˜ì§€ ì•Šì„ ê³³ì´ê¸° ë•Œë¬¸ 
- Return : safe-zoneì˜ ì¹´ìš´íŠ¸ (ì¶”í›„ main()ì—ì„œ maxê°’ê³¼ ë¹„êµ)


>[!Question] ë‚´ê°€ ìƒê°í•˜ê¸°ì— ê°œì„ í•  ìˆ˜ ìˆëŠ” ì 
>1. move(x,y) ì œê±° 
>	- ê¸°ì¡´ì—ëŠ” ìœ„/ì•„ë˜/ì¢Œ/ìš° ì›€ì§ì´ëŠ” ê²ƒë„ íŒŒë¼ë¯¸í„° ëŠ˜ë ¤ì„œ ì–´ë–»ê²Œ ì¡°ì •í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ?? ì´ëŸ¬ë©´ì„œ ì¼ë‹¨ ë§Œë“¤ì–´ë†¨ëŠ”ë° ì“°ëŠ” ê³³ì´ í•˜ë‚˜ê¸°ë„í•´ì„œ ë©”ëª¨ë¦¬ ì¤„ì´ë ¤ë©´ ì—†ì• ëŠ” ê²ƒë„ ì¢‹ì„ ìˆ˜ë„ 
>	- ê·¼ë° ì´ê±° ì œê±°í•´ë„ í¬ê²Œ ë‹¬ë¼ì§€ì§€ëŠ” ì•Šì„ ê²ƒ ê°™ë‹¤.
	> ![Pasted image 20250717001454.png](/img/user/supporter/image/Pasted%20image%2020250717001454.png)
- í™•ì¸í•´ë³´ë‹ˆ ì•„ì£¼ ì•½ê°„ 200ms ì •ë„ë§Œ ì¤„ì—ˆë„¤ â¡ ì „ì²´ ì„±ëŠ¥ì—ëŠ” í¬ê²Œ ì˜í–¥ âŒ
- ê·¼ë°â“ì´ê±¸ë¡œ 200ms ì¤„ì—ˆìœ¼ë©´ get_max_heightë„ í•˜ë“œì½”ë”©í•˜ë©´ 200msì •ë„ ì¤„ì„ ìˆ˜ ìˆë‹¤ëŠ” ê±°ë„¤???  ê·¸ëŸ¬ë©´ -> 3300ms  (ìµœì†Œ ì ˆë°˜ì€ ì¤„ì–´ì•¼ í•˜ëŠ”ë°....)

> ì´ì œ GPTí•œí…Œ ëª¨ë²”ë‹µì•ˆ ë° ìµœì í™” ì•Œë ¤ë‹¬ë¼ê³  ã„± 

### GPTì˜ ë‚´ ì½”ë“œ ë¦¬ë·° 

> ì„±ëŠ¥ì´ ì•ˆ ì¢‹ì€ ì´ìœ ë“¤ 

#### 1. ë¶ˆí•„ìš”í•œ ê¹Šì€ ë³µì‚¬(ê°€ì¥ í° ë¬¸ì œğŸ’¢)
```PYTHON
copied_areas = copy.deepcopy(original_areas)
```
- ë§¤ ë†’ì´ë§ˆë‹¤ ì „ì²´ ë°°ì—´ ê¹Šì€ ë³µì‚¬ëŠ” ë§¤ìš° ë¹„íš¨ìœ¨ì  
- deepcopysms `O(n**2)` 
- **âœ…í•´ê²°ì±… - visited ë°°ì—´ ì‚¬ìš©** 
	- visited ë°°ì—´ì„ ì´ìš©í•´ì„œ ë°©ë¬¸ ì—¬ë¶€ë¥¼ ì²´í¬í•œ ë’¤ 

#### 2. ë¹„íš¨ìœ¨ì ì¸ ìµœëŒ€ê°’ êµ¬í•˜ê¸° 
```python
# âŒë„ˆë¬´ ë¹„íš¨ìœ¨ì  : ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ì—ë¥¼ ìƒì„± í›„ ë³µì‚¬ 
def get_max_height(two_dimenstion_arr): 
		flat_list = [] 
		for row in two_dimenstion_arr: 
			for col in row:
				flat_list.append(col)
		 return max(flat_list)
```

```python
# âœ… íš¨ìœ¨ì  : ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ ìƒì„± ì—†ì´ ë°”ë¡œ max êµ¬í•˜ê¸° 
def get_max_height(areas):
Â  # rowë¥¼ í•˜ë‚˜ì”© êº¼ë‚´ëŠ”ë° ê·¸ rowì˜ ìµœëŒ€ê°’ì„ max(row)
Â  # ê·¸ë ‡ê²Œ êµ¬í•œ max(row)ë“¤ ì¤‘ max
Â  return max(max(row) for row in areas)

print(get_max_height(areas))
```
- ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“¤ê±°ë‚˜ ë³µì‚¬í•  í•„ìš”ê°€ ì—†ë‹¤

### ê°œì„ 1. max-height ë¡œì§ ê°„ë‹¨í™” 
> í•µì‹¬ :  max(max(row)) ~ + ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜ ì‚¬ìš© 

```python
def main(original_areas):
Â  max_count = 0
Â  # get_max_value : ê³ ì¸µ ë†’ì´
Â  max_height = max(max(row) for row in original_areas)
Â  for limit in range(max_height, -1, -1):
Â  Â  copied_areas = copy.deepcopy(original_areas)
Â  Â  count: int = count_safe_zone(copied_areas, limit, 0,0)
Â  Â  if max_count < count:
Â  Â  Â  max_count = count
```

![Pasted image 20250717003641.png](/img/user/supporter/image/Pasted%20image%2020250717003641.png)
- ì—¥??? ì˜¤íˆë ¤ ë” ëŠ˜ì–´ë‚¬ëŠ”ë°...??? ë¨¸ ìƒí™©ë§ˆë‹¤ ë‹¤ë¥´ë‹¤ë‹ˆê¹Œ ê·¸ëŸ°ë° 
- max-heightê°œì„ ì´ ê·¸ë ‡ê²Œ ì¢‹ì€ ê°œì„ ì€ ì•„ë‹Œ ê²ƒ ê°™ë‹¤


### ê°œì„  2. visited (+Î±) ì‚¬ìš© 
> 1/3ë¡œ ì†ë„ê°€ ê°œì„ ë˜ê¸´ í–ˆë‹¤ (ê·¼ë° ë” ê°œì„ í•´ì•¼ë  ê²ƒ ê°™ì€ë°...)
![Pasted image 20250717094021.png](/img/user/supporter/image/Pasted%20image%2020250717094021.png)
```python
import sys
sys.setrecursionlimit(10**6) Â 
input = sys.stdin.readline

n = int(input())

areas = [[0]*n for _ in range(n)]
for row in range(n):
Â  cols = list(map(int, input().split()))
Â  for col in range(n):
Â  Â  areas[row][col] = cols[col]

def dfs(areas, visited, limit, current_x, current_y): Â 
Â  # x,yê°€ ì„ ì„ ë„˜ì€ ê³³ or safeí•˜ì§€ ì•Šì€ ê³³ Â 
Â  if current_x < 0 or current_x >= n or current_y < 0 or current_y >= n or areas[current_x][current_y] <= limit or visited[current_x][current_y] == True:
Â  Â  return

	âœ… #ê°œì„ 1. visited
Â  visited[current_x][current_y] = True

Â  dfs(areas, visited, limit, current_x - 1, current_y)
Â  dfs(areas, Â visited, limit, current_x, current_y + 1)
Â  dfs(areas, Â visited, limit, current_x + 1, current_y)
Â  dfs(areas, Â visited, limit, current_x, current_y - 1)

def count_safe_zone(areas, limit):
Â  visited = [[False]*n for _ in range(n)]
Â  count = 0
Â  âœ…# ê°œì„ 2 : move -> ì´ì¤‘ forë¬¸ 
Â  for i in range(n):
Â  Â  for k in range(n):
Â  Â  Â  if areas[i][k] > limit and visited[i][k] == False:
Â  Â  Â  Â  dfs(areas, visited, limit, i, k)
Â  Â  Â  Â  count += 1
Â  Â  Â  Â  
Â  return count

max_height = max(max(row) for row in areas)
max_count = 0
for limit in range(max_height + 1):
Â  count: int = count_safe_zone(areas, limit)
Â  max_count = max(max_count, count)

print(max_count)
```
#### ê°œì„  1. visited ì‚¬ìš©
- **max_heightê°€ ì •í•´ì§ˆ ë•Œë§ˆë‹¤ visitedë°°ì—´ì„ ìƒì„±**í•´ì„œ ì‚¬ìš©
- copyì˜ deepcopyëŠ” `O(n**2)`ì„ì— ë°˜í•´ ì´ê±°ëŠ” ë‹¨ìˆœíˆ ìƒì„±ì´ë¼ ã„±ã…Š 

#### ê°œì„  2. MoveëŒ€ì‹  ì´ì¤‘ forë¬¸ 
- ê¸°ì¡´ì—ëŠ” Moveë¥¼ ì—¬ëŸ¬ ê³³ì—ì„œ í™œìš©í•˜ë ¤ê³  ë§Œë“¤ì—ˆëŠ”ë° ê·¸ëŸ´ í•„ìš”ê°€ ì—†ì–´ì¡Œìœ¼ë‹ˆ
- ì²˜ìŒë¶€í„° ëê¹Œì§€ ë„ëŠ” ì´ì¤‘ forë¬¸ì„ í™œìš©í•˜ë©´ ë²”ìœ„ë¥¼ ë„˜ì—ˆëŠ”ì§€ ì²´í¬í•  í•„ìš”ë„ ì—†ê³  ê¹”ë”í•˜ë‹¤








