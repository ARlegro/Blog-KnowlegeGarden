---
{"dg-publish":true,"permalink":"/dev-study/argorithm/python//1655/","noteIcon":"","created":"2025-07-23T22:20:48.840+09:00","updated":"2025-07-24T00:01:25.280+09:00"}
---




#ì •ë‹µ

>[!example] ë¦¬ë·° ì´ìœ  (ì •ë‹µì€ ë§ì·„ìœ¼ë‚˜)
>1. **ê½¤ ì˜¤ëœ ì‹œê°„ì´ ê±¸ë ¸ë‹¤(3ì‹œê°„)**
>	- ì˜ˆì™¸ ì¼€ì´ìŠ¤ë“¤ì„ ë°”ë¡œ ëª» ë– ì˜¬ë¼ì„œ ì˜¤ë˜ ì‹œê°„ì´ ê±¸ë ¸ë‹¤.
>	- ì„¤ê³„ëŠ” ê¸ˆë°© í–ˆëŠ”ë° ì–´ë””ì„ ê°€ ê³„ì† ì‚‘ë‚˜ëŠ”ê²Œ ë§ì•˜ë‹¤(ex. %ì¨ì•¼í•˜ëŠ”ë° //ì“°ê³ , ì¸ë±ìŠ¤ ëˆ„ë½í•˜ê³  ë“±)
>2. ìš°ì„ ìˆœìœ„ í ë¬¸ì œë¥¼ **ë§ì´ í’€ì–´ë³´ì§€ ì•Šì•„ì„œ** ë¬¸ì œ ìœ í˜• ë¶„ì„ ê²¸ 
>	- ê³¨ë“œ 2 ë¬¸ì œë¼ ë¶„ì„ì´ ë” ê°€ì¹˜ ìˆì„ê±°ë¼ê³  íŒë‹¨ 
>	  
>3. **ì½”ë“œê°€ ì§€ì €ë¶„í•œê²Œ** ë§˜ì— ì•ˆë“¬ 
>	- ì´ì „ì— ë±€ë¬¸ì œ í’€ ë•Œ DICTë¡œ ì—„ì²­ ê¹”ë”íˆ ëª¨ë“ˆí™” ì‹œì¼°ì—ˆëŠ”ë° heapqëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ê°ì´ ì•ˆì™”ë‹¤.
>	- sizeê°€ 0ì¼ë•Œ 1ì¼ë•Œ(+ì¶”ê°€ ë¶„ê¸°) ì´ë ‡ê²Œ ë¨¼ì € ì ê³  ì‹œì‘í•˜ë‹ˆê¹Œ ë³¸ ë¡œì§ ì „ì— ì˜ˆì™¸ ë¶„ê¸° ì½”ë“œê°€ 14ì¤„ì •ë„ ëëŠ”ë° ê·¸ê²ƒë„ ì–´ë–»ê²Œ ì¤„ì¼ ìˆ˜ ì—†ë‚˜?? ê³ ë¯¼í•˜ë‹¤ê°€ ë¦¬ë·° ì‹œì‘ 




### ë¬¸ì œ ë§í¬
[BOJ 1655 - ê°€ìš´ë°ë¥¼ ë§í•´ìš”](https://www.acmicpc.net/problem/1655)

### ë‚´ ì½”ë“œ 
> ë¶„ê¸°ì²˜ë¦¬ê°€ êµ‰ì¥íˆ ë”ëŸ½ë‹¤... ğŸ’¢<br>
> ëª¨ë“ˆí™” ê°™ì€ ê²½ìš°ëŠ” ê°ì²´ ì§€í–¥ ì–¸ì–´ë¥¼ í–ˆì—ˆë‹¤ë³´ë‹ˆ í‰ë‚´ë‚´ê¸°ê°€ ì‰¬ìš´ë°, **ë¶„ê¸° ì²˜ë¦¬ë¶€ë¶„ì„ ê¹”ë”íˆí•˜ëŠ”ê²Œ ì¢€ ë¶€ì¡±í•œ ê²ƒ ê°™ë‹¤.**
> 
```python
import sys, heapq
input = sys.stdin.readline

N = int(input())

âœ… # heap 2ê°œ : ì¤‘ê°„ê°’ì„ ì°¾ì•„ì•¼ í•´ì„œ max_heap, min_heap 
small_max_heap = [] # ìµœëŒ€ í™ ì—­í•  (ì¤‘ê°„ê°’ì€ ì—¬ê¸°)
big_min_heap = [] # ìµœì†Œ í™ ì—­í•  
heapq.heapify(small_max_heap)
heapq.heapify(big_min_heap)

output = []
for i in range(N):
Â  num = int(input())
Â  
Â  âœ… # ì‚¬ì´ì¦ˆ : ì§ìˆ˜ëƒ í™€ìˆ˜ëƒì— ë”°ë¼ ì–´ë””ì— ì¶”ê°€í• ì§€ê°€ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ì„œ 
Â  size = len(small_max_heap) + len(big_min_heap)

	# âœ… 0, 1 ë¯¸ë¦¬ ì²˜ë¦¬ Cuz small_max êµ¬í•  ë•Œ out of index ë‚˜ì§€ ì•Šê²Œ 
Â  if size == 0:
Â  Â  small_max_heap.append((-num, num))
Â  Â  output.append(small_max_heap[0][1])
Â  Â  continue

Â  elif size == 1:
Â  Â  s = small_max_heap[0][1]
Â  Â  if s > num:
Â  Â  Â  heapq.heappush(big_min_heap, heapq.heappop(small_max_heap)[1])
Â  Â  Â  heapq.heappush(small_max_heap, (-num, num))
Â  Â  else:
Â  Â  Â  heapq.heappush(big_min_heap, num)
Â  Â  Â  
Â  Â  output.append(small_max_heap[0][1])
Â  Â  continue

Â  small_max = small_max_heap[0][1]
Â  big_min = big_min_heap[0]
Â  âœ…# 1. ë„ˆë¬´ ì‘ì€ ê²½ìš° (num < small_max)
Â  ## small_maxë¥¼ big_min_heapì— ì˜®ê¸°ëŠ” ê²ƒì„ ê³ ë ¤(sizeê°€ í™€ìˆ˜ì¼ ë•Œ)
Â  ## sizeê°€ ì§ìˆ˜ì¸ ê²½ìš°ëŠ” ì¶”í›„ ë¡œì´ ì²˜ë¦¬ 
Â  if num < small_max and size & 1:
Â  Â  popped = heapq.heappop(small_max_heap)[1]
Â  Â  heapq.heappush(big_min_heap, popped)
Â  Â  heapq.heappush(small_max_heap, (-num, num))
Â  Â  output.append(small_max_heap[0][1])
Â  Â  continue

Â  âœ…# 2. í° ê²½ìš°
Â  ## big_minë³´ë‹¤ ì‘ì€ ê²½ìš° - ê·¸ëƒ¥ ë„˜ì–´ê°€ë©´ ë¨ : ì¶”í›„ ê³µí†µ ë¡œì§ì´ ì²˜ë¦¬ 
Â  ## big_minë³´ë‹¤ í° ê²½ìš°
Â  #### ì§ìˆ˜ => big_min popí•´ì„œ ì˜®ê¸°ê³ , big small.push(num)
Â  #### í™€ìˆ˜ => big_minì— ê·¸ëƒ¥ ë„£ìœ¼ë©´ ë¨ : ì¶”í›„ ê³µí†µ ë¡œì§ì´ ì²˜ë¦¬ 
Â  if num > big_min and size % 2 == 0:
Â  Â  popped = heapq.heappop(big_min_heap)
Â  Â  heapq.heappush(small_max_heap, (-popped, popped))
Â  Â  heapq.heappush(big_min_heap, num)
Â  Â  output.append(small_max_heap[0][1])
Â  Â  continue

	âœ…## ë‚˜ë¨¸ì§€ ê³µí†µ ë¡œì§ (ì˜ˆì™¸ ë¹¼ê³ )
Â  if size & 1:
Â  Â  heapq.heappush(big_min_heap, num)
Â  else:
Â  Â  heapq.heappush(small_max_heap, (-num, num))

Â  output.append(small_max_heap[0][1])

sys.stdout.write('\n'.join(map(str, output)) + "\n")
```

ì„¤ëª…ì€ ì£¼ì„ì— ê±°ì˜ ë‚¨ê²¨ë†¨ë‹¤. KeypointëŠ” 
1. **ì¤‘ê°„ê°’ì„ êµ¬í•˜ê¸° ìœ„í•´ 2ê°€ì§€ `heapq`ë¥¼ ì¤€ë¹„**
2. **ì…ë ¥ë°›ì€ `number`ê°€ ë„ˆë¬´ í° ê²½ìš°(í™€ìˆ˜ size) + ë„ˆë¬´ ì‘ì€ ê²½ìš°(í™€ìˆ˜ size)ì—ì„œ ì˜ˆì™¸ ë¶„ê¸° ì²˜ë¦¬**
3. ë‚˜ë¨¸ì§€ëŠ” **ê³µí†µ ë¡œì§ìœ¼ë¡œ ì²˜ë¦¬** 
4. ì‘ì€ ìˆ˜ë“¤ì„ ëª¨ì•„ ë†“ì€ ìµœëŒ€í™ì¸ small_max_heapì—ëŠ” tupleë¡œ ì €ì¥í•œë‹¤
	- ì²˜ìŒì— ì„¤ê³„ ëë‚˜ê³  tupleì—†ì´ `-`ë¡œ ìµœëŒ€í™ êµ¬í˜„ ë° ì…ë ¥ í›„ ë²„ê·¸ë¥¼ ë³´ë‹ˆê¹Œ ìŒìˆ˜(`-`)ë¡œ ì…ë ¥ë°›ì•˜ì„ ê²½ìš°ì— ì²˜ë¦¬ê°€ ì´ìƒí•˜ê²Œ ëë‹¤.
	- ê·¸ë˜ì„œ 'ì•„ ì´ê±° ì›ë³¸ë„ ë”°ë¡œ ë³´ê´€í•´ì•¼ê² ë„¤?'ë¼ëŠ” ìƒê°ì— ìµœëŒ€í™ ë¶€ë¶„ì€ tupleë¡œ ì €ì¥ 

>[!EXAMPLE] ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ í•˜ë‚˜ì˜ heapqì‚¬ìš©
>- ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ í•˜ë‚˜ì˜ `heapq`ë¡œ mid_idxë¥¼ êµ¬í•˜ê³  ê·¸ ìˆ«ìë§Œí¼ heappop()ì²˜ë¦¬í•˜ê³  ë¹„êµí•˜ê³  ë‹¤ì‹œ ë„£ê³  ì´ëŸ° ì‹ìœ¼ë¡œ í–ˆë‹¤ **But ì‹œê°„ì´ˆê³¼ ë°œìƒ**
>- ì‹œê°„ ì´ˆê³¼ ëœ¬ ê²ƒì„ ë³´ê³  'ì•„ ì´ê±° ì‹œê°„ ì œí•œ ë¬¸ì œêµ¬ë‚˜'í•˜ë©´ì„œ ìµœì í™” ë°©ë²•ì„ ë– ì˜¬ë¦¬ë‹¤ê°€ 2ê°€ì§€ heapqë¥¼ ì“°ë©´ë˜ê² ë‹¤ëŠ” ê²ƒì„ ëŠê¼ˆë‹¤.



> [!WARNING] ì•„ì‰¬ìš´ ë¶€ë¶„ 
> - ì˜ˆì™¸ë¥¼ í•˜ë‚˜í•˜ë‚˜ ë¶„ê¸° ì²˜ë¦¬í•˜ë©´ì„œ **ì „ì²´ ë¡œì§ íë¦„ì´ ë³µì¡**í•´ì§
> - ì˜ˆë¥¼ ë“¤ì–´, small_max, big_minì„ numê³¼ ë¹„êµí•˜ê¸° ìœ„í•´ ì¸ë±ìŠ¤ë¡œ heappedëœ ë¦¬ìŠ¤íŠ¸ì— ì ‘ê·¼í•´ì•¼ í•˜ëŠ”ë° **ë¹„ì–´ìˆì„ ë•Œ ì—ëŸ¬ê°€ ëœ¨ì§€ ì•Šê²Œ í•˜ë ¤ë‹¤ë³´ë‹ˆ ë¶„ê¸° ì½”ë“œê°€ ê¸¸ì–´ì¡Œë‹¤.**




### GPT ë‹µ 
>[!tip] ì¼ë‹¨ ë„£ê³ ë‚˜ì„œ ì¡°ì • 
```python
import sys, heapq
input = sys.stdin.readline

small_max_heap = []
big_min_heap = []

push = heapq.heappush
pop = heapq.heappop

def add(x):
	# ì¼ë‹¨ ì§‘ì–´ ë„£ì–´ 
Â  if not small_max_heap or num <= small_max_heap[0][1]:
Â  Â  push(small_max_heap, (-num, num))
Â  else:
Â  Â  push(big_min_heap, num)

Â  # Swap : ë£¨íŠ¸ ë…¸ë“œ ë¹„êµ í›„ 
Â  if big_min_heap and small_max_heap[0][1] > big_min_heap[0]:
Â  Â  left = pop(small_max_heap)[1]
Â  Â  right = pop(big_min_heap)
Â  Â  push(big_min_heap, left)
Â  Â  push(small_max_heap, right)

Â  # ì‚¬ì´ì¦ˆ ì¡°ì •
Â  if len(small_max_heap) < len(big_min_heap):
Â  Â  popped = pop(big_min_heap)
Â  Â  push(small_max_heap, (-popped, popped))
Â  elif len(small_max_heap) > len(big_min_heap) + 1:
Â  Â  push(big_min_heap, pop(small_max_heap)[1])

def get_mid():
Â  return small_max_heap[0][1]

N = int(input())
output = []
for i in range(N):
Â  num = int(input())
Â  add(num)
Â  output.append(str(get_mid()))

sys.stdout.write('\n'.join(map(str, output)) + "\n")
```

**ì£¼ìš” íŠ¹ì§•**
1. ì²« IFë¬¸ì—ì„œ **ê°’ì„ ë¨¼ì € ë„£ê³  ê·¸ ë‹¤ìŒì— ê°’ì„ ì¡°ì •í•˜ëŠ” ë°©ì‹**ì´ë‹¤.
	- ë‚˜ê°™ì€ ê²½ìš°ì—ëŠ” ì˜ˆì™¸ë¥¼ ë‹¤ ì²˜ë¦¬í•˜ê³  ê·¸ ë‹¤ìŒ ê°’ì„ ë„£ì—ˆë‹¤. í•˜ì§€ë§Œ gptì½”ë“œëŠ” ê°’ì„ ì¼ë‹¨ ë„£ê³  ê·¸ ë‹¤ìŒì— ì‚¬ì´ì¦ˆì— ë”°ë¼ ì¡°ì •í•˜ëŠ” ë°©ì‹ ì±„íƒ 
	- ë™ì‹œì„±ì„ ë‹¤ë£¨ëŠ” ë°©ì‹ì—ì„œ Mysql vs PostgreSQL ì°¨ì´ê°™ì€ ã… 
	  
2. **êµì • ë°©ì‹ 1. ê°’ êµì •** - swap 
	- (small_max_heap ë£¨íŠ¸ > big_min_heap ë£¨íŠ¸) â¡ **swapí•´ì£¼ê¸°** 
	- ì¦‰, ì¤‘ê°„ê°’ ìœ„ì¹˜ê°€ í‹€ì–´ì§€ì§€ ì•Šë„ë¡ ë£¨íŠ¸ ê°’ ê¸°ì¤€ìœ¼ë¡œ êµí™˜ì„ í•´ì¤€ë‹¤
	- ì‚¬ì´ì¦ˆ ê³ ì • ì „ì— ê°’ì„ ë¨¼ì € êµì •í•´ì•¼ í•¨ 
	  
3. **êµì • ë°©ì‹ 2. ì‚¬ì´ì¦ˆ ë¶ˆê· í˜• ë³´ì •**
	- **ì‚¬ì´ì¦ˆ ì°¨ì´ëŠ” ìµœëŒ€ í•˜ë‚˜**
	- `if len(left) > len(right) + 1:`
	- **ì™¼ìª½ì´ ë” ì‘ì„ ìˆ˜ê°€ ì—†ìŒ** 
	- `elif len(left) < len(right)` :
	  
4. **ëª¨ë“ˆí™”**
	- **push, pop ëª¨ë“ˆí™”** â¡ ë³´ì¼ëŸ¬íŠ¸ ì½”ë“œ ì‚­ì œ 
	- **mid êµ¬í•˜ëŠ” ë¶€ë¶„ì„ ëª¨ë“ˆí™”** í•´ì„œ main forë¬¸ì— ì ìš© 
   
5. **`heapq.heapify()` ì œê±°**
	- ì•„í•˜ push popí•  ë•Œ heappopì´ë ‡ê²Œ í•˜ë©´ í•„ìš” ì—†êµ¬ë‚˜ 




>[!tip] ì¤‘ë³µì„ ì¤„ì´ëŠ” ë°©ë²• ì¤‘ì— ëª¨ë“ˆí™”ë§Œ ìˆëŠ”ê²Œ ì•„ë‹ˆë¼ **"ë„£ê³  ì¡°ì •"** í•˜ëŠ” ë°©ì‹ë„ ìˆë‹¤