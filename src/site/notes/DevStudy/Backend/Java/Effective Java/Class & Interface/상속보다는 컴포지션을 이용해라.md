---
{"dg-publish":true,"permalink":"/DevStudy/Backend/Java/Effective Java/Class & Interface/ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì´ìš©í•´ë¼/","noteIcon":"","created":"2025-12-03T14:52:49.178+09:00","updated":"2025-12-13T10:41:04.632+09:00"}
---


> ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì´ìš©í•´ë¼ 

ìƒì†ì€ ê°•í•œ ê²°í•©ì„ ë§Œë“¤ê¸° ì‰½ê³ , ë¶€ëª¨ í´ë˜ìŠ¤ê°€ ë³€ê²½ë˜ë©´ ìì‹ í´ë˜ìŠ¤ê°€ ê¹¨ì§ˆ ìˆ˜ ìˆë‹¤.

### 0.1.  ìƒì†ì˜ í•œê³„ 
ìƒì†ì€ ì½”ë“œ ì¬ì‚¬ìš© íš¨ê³¼ë¥¼ ê°€ì§€ì§€ë§Œ, **ì˜ëª» ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ë¥¼ ë‚´ê¸° ì‰¬ìš´ S/W**ë¥¼ ë§Œë“¤ê²Œ ëœë‹¤.

> [!WARNING] ë¬¼ë¡ , ë¬¸ì„œí™” ì˜ ë˜ì–´ìˆê³ , íŒ¨í‚¤ì§€ ì•ˆì—ì„œì˜ ìƒì†ì´ë©´ ì•ˆì „í•˜ë‹¤
> - But, íŒ¨í‚¤ì§€ ê²½ê³„ë¥¼ ë„˜ì–´ ë‹¤ë¥¸ íŒ¨í‚¤ì§€ì˜ êµ¬ì²´ í´ë˜ìŠ¤ ìƒì†ì€ ë§¤ìš° **Dangerous**

#### 0.1.1.  ìº¡ìŠí™”ë¥¼ ë–¨ì–´ëœ¨ë¦°ë‹¤.

##### 0.1.1.1.  **ğŸ’¢ì•ˆ ì¢‹ì€ ì˜ˆì‹œ** 
- add() í˜¸ì¶œ íšŸìˆ˜ë¥¼ ì„¸ë ¤ëŠ” ì˜ˆì œ 
```java

public class InstrumentedHashSet<E> extends HashSet<E> {
    private int addCount = 0;

    @Override
    public boolean add(E e) {
        // ì¹´ìš´íŠ¸ 
        addCount++;
        return super.add(e);
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
		    // ì¹´ìš´íŠ¸ 
        addCount += c.size(); 
        return super.addAll(c); // ë¶€ëª¨ëŠ” ê° ì›ì†Œ add() í˜¸ì¶œ
    }

    public int getAddCount() {
        return addCount;
    }

```
- add()ì™€ addAll()ì„ í•˜ë©´ì„œ addCount(í˜¸ì¶œ íšŸìˆ˜)ë¥¼ ì¹´ìš´íŠ¸í•˜ê³  ìˆë‹¤ 

**ğŸ’¢ë¬¸ì œ ë°œìƒ ì‹œë‚˜ë¦¬ì˜¤**
```java
InstrumentedHashSet ish = new InstrumentedHashSet<>();
ish.addAll(List.of("A", "B", "C"));
System.out.println(set.getAddCount());
```


**âŒì˜¤ë¥˜ê°€ ë‚œ ì´ìœ ** 
`addAll(Collection c) â†’ ë‚´ë¶€ì ìœ¼ë¡œ HashSet.add()`ë¥¼ ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•¨
- `HashSet`ì˜ `addAll`ì€ ê° ì›ì†Œë¥¼ `add` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ ì¶”ê°€í•˜ëŠ”ë° ì´ë•Œ ë¶ˆë¦¬ëŠ” `add`ëŠ” InstumentedHashSetì—ì„œ ì¬ì •ì˜í•œ ë©”ì„œë“œì´ë‹¤. 
- ë”°ë¼ì„œ, ìì‹ í´ë˜ìŠ¤ì—ì„œë„ ë”í•œ íšŸìˆ˜ë§Œí¼ ë¶€ëª¨ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œë„ ìì‹ í´ë˜ìŠ¤ì˜ add()ë¥¼ í˜¸ì¶œí•˜ë¯€ë¡œ 2ë°°ë¡œ ì¹´ìš´íŠ¸ ëœ ê²ƒ 

> ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ì— ì˜ì¡´í•˜ëŠ” íŒ¨í„´ì´ë¼ ë°œìƒí•œ ê²½ìš° 


>[!EXAMPLE] 1ë²ˆ ìƒì†ì˜ ë‹¨ì  ê²°ë¡ 
>- ìƒì†ì€ **ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì— ê°•í•˜ê²Œ ê²°í•©ë¨**
>- ë¶€ëª¨ê°€ ì–´ë–¤ ì‹ìœ¼ë¡œ ë©”ì„œë“œë¥¼ êµ¬ì„±í–ˆëŠ”ì§€ ì™„ë²½íˆ ì´í•´í•˜ì§€ ì•Šìœ¼ë©´ ìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼ ì˜¤ë¥˜ê°€ ë‚  ìˆ˜ ìˆë‹¤.

>[!tip] ê°„ë‹¨ í•´ê²° : addAll() ë©”ì„œë“œ ì¬ì •ì˜
>ì§€ê¸ˆì€ ë²„ê·¸ë‚  ìˆ˜ ìˆëŠ” ì˜ˆì‹œë¼ì„œ ì´ë ‡ê²Œ í•œ ê²ƒ 
>ê·¸ë˜ë„ ì¬ì •ì˜ì—ëŠ” ë¹„ìš©ì´ ë“ ë‹¤
>- êµ¬í˜„ ë°©ì‹ì„ ìƒê°í•´ì•¼ í•œë‹¤
>- ì‹œê°„ì´ ë“ ë‹¤
>- ìì¹« ì˜ëª» ì˜¤ë¥˜ ë‚¼ ìˆ˜ ìˆë‹¤.
>- ì§ì ‘ êµ¬í˜„í•˜ë‹¤ê°€ ì„±ëŠ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

> ì´ëŸ¬í•œ addAll() ì¬ì •ì˜ ë§ê³  ë‹¤ë¥¸ ëŒ€ì•ˆì´ ìˆë‹¤. ê·¸ê±´ ë°”ë¡œ 'ì»´í¬ì§€ì…˜'ì„ ì´ìš©í•˜ëŠ” ê²ƒ 

#### 0.1.2.  ì˜ì¡´ì„± 
> ìƒì†ì€ í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìƒìœ„ í´ë˜ìŠ¤ì˜ **êµ¬í˜„ ì„¸ë¶€ì‚¬í•­ì— ì˜ì¡´**í•˜ê²Œ ë§Œë“ ë‹¤.  
> ì´ë¡œ ì¸í•´ ìƒìœ„ í´ë˜ìŠ¤ê°€ ë³€ê²½ë˜ë©´ í•˜ìœ„ í´ë˜ìŠ¤ëŠ” ê¹¨ì§€ê¸° ì‰½ë‹¤.

ë§Œì•½, ìƒìœ„ í´ë˜ìŠ¤ì—ì„œ ìƒˆë¡œìš´ ë©”ì„œë“œê°€ ì¶”ê°€ë˜ì—ˆë”°ë©´?
ì´ì „ ì˜ˆì‹œì—ì„œ ê° ì»¬ë ‰ì…˜ì˜ ì›ì†Œë“¤ì„ íŠ¹ì • ì¡°ê±´ì— ë§ì¶”ë„ë¡ í•˜ëŠ” ë©”ì„œë“œë¼ë©´?
ìƒì† ì¤‘ì´ë¼ë©´ ìì‹ í´ë˜ìŠ¤ì—ì„œ Overrideí•´ì„œ ê²€ì‚¬í•˜ë©´ ëœë‹¤.
ê·¼ë° ì´ê²Œ ë¬¸ì œë¼ëŠ” ê±°ë‹¤.
- ì¬ì •ì˜ë¥¼ ê¹œë¹¡í•  ìˆ˜ ìˆê³ 
- ì¬ì •ì˜ë¥¼ í•œë‹¤ëŠ” ê²ƒ ìì²´ê°€ ì˜ì¡´ì ì´ë¼ëŠ” ê²ƒì´ë‹¤.

### 0.2.  í•´ê²° ë°©ë²• 

#### 0.2.1.  **ëŒ€ì•ˆ 1** 
> ìƒì†í•˜ì§€ ì•Šê³  ë‚´ë¶€ í•„ë“œë¡œ ê°ì‹¸ê¸° 

#ìœ ì—°ì„± 

```java 
public class InstrumentedSet<E> extends AbstractSet<E> {
    private final Set<E> s;  // Composition
    private int addCount = 0;

    @Override
    public boolean add(E e) {
        addCount++;
        return s.add(e);
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
        addCount += c.size();
        return s.addAll(c);
    }

    @Override
    public int size() { return s.size(); }

    public int getAddCount() {
        return addCount;
    }
}

```
- `HashSet`ì„ ìƒì†í•˜ì§€ ì•Šê³  ë‚´ë¶€ í•„ë“œë¡œ ê°ìŒŒë‹¤.
- ë‚´ë¶€ êµ¬í˜„ ë³€ê²½ì— ì•ˆì •
- ì›í•˜ëŠ” ê¸°ëŠ¥ë§Œ override ê°€ëŠ¥ 

#### 0.2.2.  ëŒ€ì•ˆ 2. ë˜í¼í´ë˜ìŠ¤ë¡œ ë§Œë“¤ê¸° 



### 0.3.  ğŸ”š ìš”ì•½

- ìƒì†ì€ ê°•ë ¥í•˜ì§€ë§Œ **ìº¡ìŠí™”ë¥¼ í•´ì¹œë‹¤**
- ìƒì†ì€ ìƒìœ„-í•˜ìœ„ í´ë˜ìŠ¤ê°€ ìˆœìˆ˜í•œ is-a ê´€ê³„ì¼ ë•Œë§Œ ì¨ì•¼ í•œë‹¤.
- is-a ê´€ê³„ì—¬ë„ í•˜ìœ„-ìƒìœ„ í´ë˜ìŠ¤ì˜ íŒ¨í‚¤ì§€ê°€ ë‹¤ë¥´ê³  í™•ì¥ì„ ê³ ë ¤í•´ ì„¤ê³„ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ì—¬ì „íˆ ë¬¸ê°€ëŠ¥í•˜ë‹¤ (ì´ì „ì— `addAll()`ë²„ê·¸)
- ìƒì† ì·¨ì•½ì  í”¼í•˜ëŠ” ë²•
	- ì»´í¬ì§€ì…˜ê³¼ ì „ë‹¬ì„ ì´ìš©í•˜ì
	- ë˜í¼í´ë˜ìŠ¤ë¡œ êµ¬í˜„í•  ì ë‹¹í•œ ì¸í„°í˜ì´ìŠ¤ê°€ ìˆë‹¤ë©´ ë”ìš± ê·¸ë ‡ë‹¤

| êµ¬ë¶„   | ìƒì†            | ì»´í¬ì§€ì…˜ |
| ---- | ------------- | ---- |
| ìº¡ìŠí™”  | ê¹¨ì§€ê¸° ì‰¬ì›€        | ìœ ì§€ë¨  |
| ì˜ì¡´ì„±  | ë¶€ëª¨ êµ¬í˜„ì— ê°•í•˜ê²Œ ì˜ì¡´ | ëŠìŠ¨í•¨  |
| ìœ ì§€ë³´ìˆ˜ | ì–´ë µê³  ìœ„í—˜        | ì•ˆì „í•¨  |
| ìœ ì—°ì„±  | ë‚®ìŒ            | ë†’ìŒ   |
