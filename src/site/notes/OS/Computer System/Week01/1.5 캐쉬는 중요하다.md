---
{"dg-publish":true,"permalink":"/os/computer-system/week01/1-5/","noteIcon":"","created":"2025-07-12T23:31:40.713+09:00","updated":"2025-07-13T20:57:21.657+09:00"}
---


--- 
### 캐시 메모리란 ❓

- 중앙 처리 장치(CPU)와 메인 메모리(RAM)의 사이에 위치한 **작고 매우 빠른 임시 저장공간** 
- CPU가 데이터에 접근할 때 **RAM보다 더 빠르게 접근할 수** 있다. 이를 활용하여 데이터 기다리는 시간을 최소화 해 성능을 향상시킬 수 있다.

### 캐시가 중요한 이유 : 병목 해결 
#성능  #병목해결 

- **처리속도 vs 전송속도 의 차이 이해** 
	- 기본적으로 `CPU 처리속도 > 메인메모리의 데이터 전송속도` 이다.
	- 즉, CPU가 RAM에서 데이터를 매번 가져와야 한다면, CPU는 대부분의 시간을 낭비하게 될 것 
	- 이를, '**성능 병목 현상**'이라고 함 
	  
- **병목 현상 완화**
	- 캐시는 CPU가 처리할 데이터를 가지고 있으므로 병목 현상을 완화할 수 있다.
	- 이로 인해 프로그램 실행 속도가 빨라진다.
--- 
### 대표적 캐시 메모리 저장 규칙 - 지역성의 원리 

캐시를 무작정하는 것은 아니다.
캐시 메모리가 효과적으로 작동할 수 있는 근본적인 이유 ➡ **지역성 기반 데이터 접근 패턴** 

#### 1. 시간 지역성 - 최근에 접근된 데이터 
- **정의** 
	- **최근에 참조된** 데이터/인스트럭션은 **가까운 미래에 다시 참조될 가능성이 높다**는 원
	- 최근 참조 데이터/인스트럭션을 캐시에 적용 
- **예시**
	- 반복문 내의 변수 : 그 변수는 여러 번 쓰이므로 캐시 
	- 함수 호출 : 반복해서 함수 호출 시 그 함수 인스트럭션은 여러 번 쓰이는 경우 
	- 스택/힙 데이터 : 스택/힙에 저장된 데이터가 여러 번 쓰일 경우 

#### 2. 공간 지역성 - 최근에 접근된 데이터 주변
- **정의**
	- **최근에 참조된** 메모리 주소 **"근처"** 의 데이터/인스트럭션은 **가까운 미래에 참조될 가능성이 높다**
- **예시**
	- **배열 순회 시** : 배열 원소들은 메모리에 연속적으로 저장되어 있으므로, 하나의 원소 접근 시 그 다음 원소 접근 가능성이 높다
	- **인스트럭션 순차 실행** : 현재 인스트럭션 실행 후 다음 인스트럭션 실행 가능성 높음 


> [!TIP] 이러한 지역성 원리를 이용해서 데이터를 단일 바이트로 가져오지 않고 "캐시 라인" or "캐시 블록"이라는 고정된 크기의 덩어리로 가져온다.
> 즉, 하나의 데이터 요청 시 ➡ 그 데이터 + 주변 데이터까지 캐시에 로드 

--- 
### 캐시 용어 

#### 캐시 라인/블록 
> 캐시와 메인 메모리 간에 데이터를 주고받는 최소 단위 

#### 캐시 히트(Cache hit)
- CPU가 필요로 하는 데이터가 ✅**캐시 메모리 안에 이미 존재**하는 경우 
- 이 경우, **메인 메모리까지 갈 필요 없이** 캐시에서 매우 빠르게 데이터를 가져와 처리 가능 

#### 캐시 미스(Cache Miss)
- CPU가 필요로 하는 데이터가 ❌**캐시 메모리 안에 없는** 경우
- **종류**
	1. **강제 미스** or Cold Miss
		- 해당 데이터가 캐시에 한 번도 로드된 적이 없어서 발생하는 미스 
		- 프로그램 처음 시작 시 자주 발생 
		  
	2. **용량 미스**
		- 캐시의 전체 용량보다 더 큰 데이터를 다루려고 할 때 발생하는 미스
		- 가져오는 데이터가 너무 큰 경우 모든 데이터를 캐시에 저장할 수 없어서 캐시 미스가 발생
		  
	3. **충돌 미스 (Conflict Miss)**
		- 캐시 메모리의 **주소 할당 방식** 때문에 발생하는 미스
		- 데이터를 저장할 때 무작위로 저장하는 것이 아니라 어떤 로직으로 **특정 '위치'에 저장**을 한다. 그런데 이 때 **서로 다른 데이터들이 같은 위치를 사용하려고하면 충돌**이 발생하게 된다.

#### 캐시 계층 
> 현대 CPU는 단일 캐시가 아니라 여러 레벨의 캐시를 사용한다

DB 캐시, OS 캐시, Redis 등 

- **L1 캐시** : CPU 코어 내부에 가장 가깝게 위치. 가장 작고 빠름 
- **L2 캐시** : L1보다 크고 느림. But 메인 메모리보다는 빠르다
- **L3 캐시** : 모든 CPU코어가 공유하는 가장 큰 캐시. L2보다는 느리지만 메인 메모리보다는 빠름 


