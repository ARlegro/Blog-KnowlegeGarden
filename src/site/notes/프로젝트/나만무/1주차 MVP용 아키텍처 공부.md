---
{"dg-publish":true,"permalink":"/프로젝트/나만무/1주차 MVP용 아키텍처 공부/","noteIcon":"","created":"2025-12-06T12:52:49.695+09:00","updated":"2025-12-10T11:03:46.674+09:00"}
---


나만무 프로젝트에서 초반 아키텍쳐 설계를 위해 공부한 내용이다.
인프라 담당은 아니지만 MVP 제출 기한(1주)이 짧아서 비교적 개발 경험이 있는 내가 하게되었다. (이후 인프라는 다른 사람이 담당할 예정)

### 0.1.  목차

- [[#아키텍처 사진 분석|아키텍처 사진 분석]]
	- [[#아키텍처 사진 분석#1.  유저 - ALB 까지|1.  유저 - ALB 까지]]
	- [[#아키텍처 사진 분석#2.  S3 -> CloudFront|2.  S3 -> CloudFront]]
	- [[#아키텍처 사진 분석#3.  유저 -> KSV|3.  유저 -> KSV]]
- [[#개념|개념]]
	- [[#개념#1.  로드 벨런스|1.  로드 벨런스]]
		- [[#1.  로드 벨런스#1.1.  로드 벨런싱이란❓|1.1.  로드 벨런싱이란❓]]
		- [[#1.  로드 벨런스#1.2.  ELB - AWS의 로드벨런스|1.2.  ELB - AWS의 로드벨런스]]
		- [[#1.  로드 벨런스#1.3.  ALB|1.3.  ALB]]
	- [[#개념#2.  CloudFront란❓|2.  CloudFront란❓]]
	- [[#개념#3.  Turn Server|3.  Turn Server]]
		- [[#3.  Turn Server#3.1.  개념 및 특징|3.1.  개념 및 특징]]
		- [[#3.  Turn Server#3.2.  한계|3.2.  한계]]
	- [[#개념#4.  Kinesis Video Streams|4.  Kinesis Video Streams]]
		- [[#4.  Kinesis Video Streams#4.1.  기본 특징|4.1.  기본 특징]]
		- [[#4.  Kinesis Video Streams#4.2.  부가 기능|4.2.  부가 기능]]



# 아키텍처 사진 분석



## 1.  유저 - ALB 까지 

![Pasted image 20251028205959.png](/img/user/supporter/image/Pasted%20image%2020251028205959.png)

1. *User ➡ Route 53(DNS)*
	- 사용자가 입력한 도메인 이름을 해석하여, 다음에 **트래픽을 보낼 곳의 IP 주소를 알려줌** 
	- 라우팅 설정은 보통 아래 두 가지 중 하나로 
		1. CloudFront의 배포 도메인으로 라우팅 
		2. ALB의 DNS이름으로 
	  
2. *Route 53 ➡CloudFront*
	- 사용자에게 가장 가까운 엣지 로케이션(CDN)에 연결
		- CloudFront = CDN (Content Delivery Network)
		- 참고 : [[프로젝트/나만무/1주차 MVP용 아키텍처 공부\|1주차 MVP용 아키텍처 공부]]
		- 캐싱이 안되어 있다면 S3에서 가져오기
		  
	- ⭐**요청 중 캐싱되지 않은 동적 요청 시** ALB의 DNS 이름을 원본으로 설정하여 요청 
		
3. *IGW(Internet Gateway)*
	- VPC내의 리로스와 인터넷 간의 통신을 가능하게 하는 관문 
	  
4. *ALB* 
	- 트래픽을 분산시키고 라우팅 수행 

## 2.  S3 -> CloudFront
> S3에 빌드 파일 업로드 후 CDN 배포 

![Pasted image 20251028212833.png](/img/user/supporter/image/Pasted%20image%2020251028212833.png)

- AWS S3 버킷에 : **React**로 빌드된 정적 파일(JS/CSS/HTML)이 저장되어 있다.
- 이 S3 버킷의 컨텐츠를 **CloudFront**(CDN)가 전 세계적으로 캐싱해 빠르게 제공

> ✅ 정적 콘텐츠는 빠르게 제공되고, 트래픽 부하를 서버에서 분리할 수 있다.


>[!QUESTION] 정적 파일 있는데 왜 따로 EC2에 Front 넣는거지❓
>- EC2 인스턴스는 단순한 정적 파일 제공자가 아니다.
>- **실시간 상호작용**을 처리하기 위한 **애플리케이션의 내부적인 런타임 환경**을 나타낸다.


## 3.  유저 -> KSV

> WebRTC 통신을 위한 시그널링 서비스 제공 




# 개념 

## 1.  로드 벨런스 
> 로드 벨런싱을 담당 

![Pasted image 20251028203935.png](/img/user/supporter/image/Pasted%20image%2020251028203935.png)
`[출처 : Inpa]`

### 1.1.  로드 벨런싱이란❓
#네트워크트래픽분산 

> 여러 서버에 네트워크 트래픽을 효율적으로 분산하는 프로세스 

*주요 특징*
 1. *부하 분산을 통한 성능 향상* 
	 - 특정 서버에 **부하가 집중되는 것을 막고**, 전체 시스템의 **가용성과 응답성을 최적화**
	   
 2. *가용성* 
	 - 정보 시스템(서버, 네트워크, 프로그램 등)이 **정상적으로 작동**하고 사용자가 필요할 때 **언제든지 이용할 수 있는** 상태
	 - *고가용성* ➡ 상당히 오랜 기간 동안 지속적으로 장애 없이 정상 운영이 가능한 성질 
	   
 3. *장애 대비 가능*
	 - 특정 서버 장애 발생 시 해당 서버로의 트래픽 전송을 중단하고 다른 서버로 전달 가능 
	   
 4. *확장성* 
	 - 필요에 따라 서버를 추가할 수 있다(확장 자동화)
	   
 5. *보안* 
	 - 암호화, 방화벽, 인증과 같은 기능이 포함될 수 있다.


### 1.2.  ELB - AWS의 로드벨런스

AWS의 로드 벨런싱 서비스를 담당하는 것들을 통칭하는 것이 ELB(Elastic Load Balancing)이다.
- 둘 이상의 가용 영역에서 수신되는 트래픽을 자동으로 분산 
- 등록된 대상의 상태를 모니터링하여 상태가 양호한 대상으로만 트래픽 라우팅 

*ELB의 종류*
- CLB
- *ALB(Application Load Balancer)* : **애플리케이션 계층에서 작동**하는 로드 벨런스 
- NLB


### 1.3.  ALB

> 클라이언트의 요청을 여러 서버(EC2, ECS, Lambda 등)에 자동으로 분산시키는 서비스 

AWS에서 제공하는 로드 벨런서의 한 종류 

계층 : OSI 7Layer의 7번째 계층인 Application Layer에서 작동

*✅동작 방식* 
1. *Client ➡ Internet Gateway*
	- IGW(Internet Gateway) : VPC가 인터넷과 통신할 수 있게 해주는 관문 
	  
2. *Internet Gateway ➡ALB*
	- Public Subnet에 있는 ALB가 요청을 받아들인다.
	- **내용을 분석**하고 해당 트래픽을 **적절한 곳으로 라우팅** 
	  


## 2.  CloudFront란❓
[클라우드 프론트 참고 링크 - 인파](https://inpa.tistory.com/entry/AWS-%F0%9F%93%9A-CloudFront-%EA%B0%9C%EB%85%90-%EC%9B%90%EB%A6%AC-%EC%82%AC%EC%9A%A9-%EC%84%B8%ED%8C%85-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC)

>[!QUESTION] CDN이란?  Content Delivery Network(콘텐츠 전송 네트워크)
> **콘텐츠를 효율적으로 전달하기 위해** 여러 노드를 가진 네트워크에 데이터를 저장하여 제공하는 시스템
> - 정적 컨텐츠(웹 페이지, 이미지, 동영상 등)를 본래 서버에서 받아와 캐싱
> - 해당 컨텐츠에 대한 **요청이 들어오면 캐싱해 둔 컨텐츠 제공** 
> <br>![Pasted image 20251028142658.png](/img/user/supporter/image/Pasted%20image%2020251028142658.png)


## 3.  Turn Server

### 3.1.  개념 및 특징 
> WebRTC와 같은 실시간 통신에서 사용되는 데이터 중계 서버 

![Pasted image 20251028231218.png](/img/user/supporter/image/Pasted%20image%2020251028231218.png)

- 클라이언트들이 **통신할 때** Public 망에 존재하는 **Turn 서버를 경유하여 통신** 
- STUN 서버를 통해서도 P2P연결이 불가능할 때 마지막 수단으로 사용됨 
	- 두 Peer가 서로 다른 NAT에 있거나 방화벽이 엄격하여 직접 연결이 불가능할 때 두 Peer 사이의 통신 중개자 역할 
	- 즉, **네트워크 환경 제약으로 STUN서버 이용 못 하면 TURN 서버 이용** 
	  


### 3.2.  한계 

1. *트래픽 부하 및 비용* 
	- 모든 미디어 스트림이 서버를 통해 relay시 비용이 많이 듬 
2. *지연 증가*
	- P2P통신이 아닌 중개 방식이라 전송 경로가 늘어난다.
	- 이로 인해 품질에 큰 영향 줌 
3. *Stateful* 
	- 각 Peer 커넥션에 대한 세션 유지가 필요하다.
	- 따라서, 사용자가 많아질수록 세션 관리 비용 리소스 사용량 급증 
	  



## 4.  Kinesis Video Streams 
> WebRTC 통신을 위한 시그널링 서비스 제공 

*시그널링 : 연결 정보를 교환하는 과정 *

### 4.1.  기본 특징 
- 유저 간 **실시간 양방향 미디어 스트리밍** 및 데이터 채널을 가능하게 
- *WebRTC를 지원* 
	- 실시간 양방향 스트리밍 기능 활성화 가능 
- *완전 관리형 서비스* 
	- 직접 관리할 필요 없이 AWS가 모두 처리 
- 대규모로 전송되는 비디오 스트림을 자동으로 처리 가능 

>[!tip] 복잡한 인프라 관리 없이 **대규모 비디오 데이터 수집, 저장 및 처리**를 간소화하는 강력한 도구

### 4.2.  부가 기능 

1. *STUN - 공개 주소를 파악* 
	- STUN을 통해 개인 NAT뒤에 있는 공인 IP 주소와 포트를 파악할 수 있게 함 
	- 이 기능이 있어야 Peer끼리 데이터 전송 경로 확보 가능 
2. *TURN 서버* 
	- STUN을 통한 P2P 직접 연결이 불가능할 때, KSV의 **TURN 서버가 데이터 중계 서버 역할**을 함 

> [!INFO] 대부분 WebRTC시 가능한 한 TURN 서버 사용 안하고 직접 연결 시도 

